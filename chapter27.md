# 27 插曲：线程API
本章简要介绍线程API的主要部分。每个部分将在随后的章节中进一步解释，为我们展示了如何使用API。更多细节可以在各种书籍和网上找到源[B89，B97，B +96，X +96]。我们应该注意到，后面的章节有很多例子介绍了锁和条件变量的概念比较慢；从而更好本章用作参考

> 关键：如何创建和控制线程
> 
> 操作系统应该为线程的创建和控制提供什么接口？应该如何设计这些接口来保证易用性以及效用？


## 27.1 线程创建
创建多线程程序第一步要完成的事当然是创建新的线程，所以必须有一些线程创建的接口，在POSIX中，它很简单：

```
#include <pthread.h>
int
pthread_create( pthread_t * thread,
       const pthread_attr_t * attr,
    void * (*start_routine)(void*),
                        void * arg);
```

这个定义虽然看起来有点复杂，但是其实并不是那么糟糕。它有4个参数分别是thread, attr, start_routine和arg。

第一个参数，thread，是指向类型为pthread_t结构体的指针；我们要使用这个结构体与这个线程交互，所以我们需要传入它用pthread_create初始化它。

第二个参数，attr

## 27.2 线程完成

## 27.3 锁

## 27.4 条件变量

## 27.5 编译与运行

## 27.6 总结
